<!doctype html>
<html lang="cs">
  <head>
    <meta charset="utf-8" />
    <title>Agent USA â€“ mÄ›stskÃ© menu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      #timetableCard {
        transition: transform 0.3s ease, margin-top 0.3s ease, box-shadow 0.3s ease;
      }
      .timetable-raised {
        transform: translateY(-50vh);
        margin-top: -40px;
        box-shadow: 0 18px 36px rgba(0, 0, 0, 0.45);
      }
    </style>
  </head>
  <body class="min-h-screen text-slate-100 bg-gradient-to-br from-[#0b1224] via-[#0a0f1d] to-[#0e1d33]">
    <div class="w-[80%] mx-auto px-6 py-6 space-y-5">
      <header class="flex items-center justify-between rounded-full px-4 py-2 bg-gradient-to-r from-sky-500/30 via-cyan-300/20 to-fuchsia-400/30 shadow-lg shadow-sky-900/30 backdrop-blur">
        <div class="flex items-center gap-2">
          <div class="h-7 w-7 rounded-full bg-gradient-to-br from-sky-400 via-slate-50 to-rose-500 shadow-lg shadow-sky-500/30"></div>
          <p class="text-[11px] uppercase tracking-[0.35em] text-slate-100">Agent USA</p>
        </div>
        <div class="flex items-center gap-4 text-[11px] uppercase tracking-[0.2em] text-slate-100">
          <a href="#" class="hover:text-sky-200">Save</a>
          <span class="h-3 w-px bg-slate-200/50"></span>
          <a href="#" class="hover:text-rose-200">Exit</a>
        </div>
      </header>

      <section class="flex flex-wrap items-center justify-between gap-3 px-1 py-1">
        <div class="flex items-center gap-3">
         
          <div>
            <h2 id="currentCityName" class="text-xl font-bold text-slate-100">-</h2>
            <p id="currentCityState" class="text-sm text-slate-300">-</p>
          </div>
        </div>
        <div class="flex items-center gap-4 text-sm text-slate-200">
          <p class="text-[11px] uppercase tracking-[0.2em] text-slate-400">TÃ½den <span id="gameWeekLabel">1</span></p>
          <p id="currentTimeLabel" class="text-base font-semibold text-sky-100">Po 08:00</p>
        </div>
      </section>

      <div class="grid lg:grid-cols-[1.5fr_0.5fr] gap-5 items-start">
        <!-- LevÃ½ sloupec: canvas -->
        <main class="space-y-3">
          <div id="canvasBlock" class="relative overflow-hidden rounded-3xl bg-transparent shadow-[0_25px_90px_rgba(0,0,0,0.2)]">
            <div class="absolute inset-0 z-0">
              <div id="skyGradient" class="absolute inset-0"></div>
              <img
                id="cityBackdrop"
                src=""
                alt="Panorama mÄ›sta"
                class="relative h-full w-full object-cover opacity-80 blur-[1px]"
                onerror="this.classList.add('opacity-0');"
              />
            </div>
            <div class="relative z-10 p-4">
              <div id="visualFrame" class="relative rounded-2xl overflow-hidden aspect-[16/9] bg-transparent">
                <canvas
                  id="gameCanvas"
                  width="1024"
                  height="576"
                  class="absolute inset-0 w-full h-full bg-slate-950/70"
                ></canvas>
              </div>
              
            </div>
          </div>

          <!-- Odjezdy schovanÃ© pod tlaÄÃ­tkem Stanice (stÃ¡le napojenÃ© na JS) -->
          <div id="timetableCard" class="relative bg-gradient-to-br from-slate-800/80 via-slate-900/80 to-slate-950/80 rounded-2xl shadow-[0_18px_60px_rgba(0,0,0,0.35)] p-4 hidden">
            <div class="flex items-center mb-3">
              <h2 class="text-base font-semibold text-slate-100 flex items-center gap-2">
                <span class="text-sky-300">ğŸš‰</span> JÃ­zdnÃ­ Å™Ã¡d
              </h2>
            </div>

            <div class="overflow-x-auto rounded-xl bg-slate-900/70">
              <table id="timetableTable" class="min-w-full text-xs bg-transparent tabular-nums">
                <thead class="text-slate-200">
                  <tr class="uppercase tracking-[0.08em] text-[11px] text-slate-400">
                    <th class="px-3 py-2 text-left font-semibold">ğŸ•’ Odjezd</th>
                    <th class="px-3 py-2 text-left font-semibold">â¡ï¸ SmÄ›r jÃ­zdy</th>
                    <th class="px-3 py-2 text-left font-semibold">ğŸš† Typ</th>
                    <th class="px-3 py-2 text-left font-semibold">ğŸ“ VzdÃ¡l.</th>
                    <th class="px-3 py-2 text-left font-semibold">â³ ÄŒas jÃ­zdy</th>
                    <th class="px-3 py-2 text-left font-semibold">ğŸ PÅ™Ã­jezd</th>
                    <th class="px-3 py-2 text-left font-semibold">ğŸŸï¸ Ticket</th>
                  </tr>
                </thead>
                <tbody id="timetableBody" class="divide-y divide-slate-800/60 text-slate-200">
                  <!-- plnÃ­ JS -->
                </tbody>
              </table>
            </div>
          </div>
        </main>

        <!-- PravÃ½ sloupec: ovlÃ¡dÃ¡nÃ­ -->
        <aside>
          <section class="rounded-2xl p-5 bg-gradient-to-b from-slate-800/70 via-slate-900/70 to-slate-950/70 shadow-[0_18px_60px_rgba(0,0,0,0.3)] space-y-4">
            <div class="flex items-center gap-2">
              <span class="text-lg">ğŸ§­</span>
              <h3 class="text-sm font-semibold text-slate-100 uppercase tracking-[0.16em]">Lokace ve mÄ›stÄ›</h3>
            </div>
            <div class="grid grid-cols-1 gap-2 text-sm">
              <button id="cityHubBtn" class="group flex items-center gap-3 rounded-xl bg-gradient-to-r from-slate-800/80 via-slate-700/70 to-slate-900/80 px-3 py-2.5 hover:from-sky-700/70 hover:via-sky-800/70 hover:to-slate-900/80 transition shadow-sm shadow-slate-900/30 relative overflow-hidden">
                <span class="absolute -left-2 top-1/2 -translate-y-1/2 h-10 w-10 rounded-full bg-slate-500/30 blur-xl"></span>
                <span class="inline-flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-slate-200 to-slate-500 text-base shadow-md shadow-slate-900/40">ğŸ¡</span>
                <span class="font-semibold text-slate-100">Ãšvod</span>
              </button>
              <button id="ticketToggleBtn" class="group flex items-center gap-3 rounded-xl bg-gradient-to-r from-slate-800/80 via-slate-700/70 to-slate-900/80 px-3 py-2.5 hover:from-sky-700/70 hover:via-sky-800/70 hover:to-slate-900/80 transition shadow-sm shadow-slate-900/30 relative overflow-hidden">
                <span class="absolute -left-2 top-1/2 -translate-y-1/2 h-10 w-10 rounded-full bg-sky-500/30 blur-xl"></span>
                <span class="inline-flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-sky-300 to-sky-600 text-base shadow-md shadow-slate-900/40">ğŸš‰</span>
                <span class="font-semibold text-slate-100">NÃ¡draÅ¾Ã­</span>
              </button>
              <button class="group flex items-center gap-3 rounded-xl bg-gradient-to-r from-slate-800/80 via-slate-700/70 to-slate-900/80 px-3 py-2.5 hover:from-emerald-700/70 hover:via-emerald-800/70 hover:to-slate-900/80 transition shadow-sm shadow-slate-900/30 relative overflow-hidden">
                <span class="absolute -left-2 top-1/2 -translate-y-1/2 h-10 w-10 rounded-full bg-emerald-500/30 blur-xl"></span>
                <span class="inline-flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-emerald-300 to-emerald-600 text-base shadow-md shadow-slate-900/40">ğŸ¦</span>
                <span class="font-semibold text-slate-100">Banka</span>
              </button>
              <button class="group flex items-center gap-3 rounded-xl bg-gradient-to-r from-slate-800/80 via-slate-700/70 to-slate-900/80 px-3 py-2.5 hover:from-amber-700/70 hover:via-amber-800/70 hover:to-slate-900/80 transition shadow-sm shadow-slate-900/30 relative overflow-hidden">
                <span class="absolute -left-2 top-1/2 -translate-y-1/2 h-10 w-10 rounded-full bg-amber-500/30 blur-xl"></span>
                <span class="inline-flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-amber-200 to-amber-500 text-base shadow-md shadow-slate-900/40">ğŸ›ï¸</span>
                <span class="font-semibold text-slate-100">Radnice</span>
              </button>
              <button class="group flex items-center gap-3 rounded-xl bg-gradient-to-r from-slate-800/80 via-slate-700/70 to-slate-900/80 px-3 py-2.5 hover:from-indigo-700/70 hover:via-indigo-800/70 hover:to-slate-900/80 transition shadow-sm shadow-slate-900/30 relative overflow-hidden">
                <span class="absolute -left-2 top-1/2 -translate-y-1/2 h-10 w-10 rounded-full bg-indigo-500/30 blur-xl"></span>
                <span class="inline-flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-indigo-200 to-indigo-500 text-base shadow-md shadow-slate-900/40">ğŸ§ª</span>
                <span class="font-semibold text-slate-100">LaboratoÅ™</span>
              </button>
              <button class="group flex items-center gap-3 rounded-xl bg-gradient-to-r from-slate-800/80 via-slate-700/70 to-slate-900/80 px-3 py-2.5 hover:from-rose-700/70 hover:via-rose-800/70 hover:to-slate-900/80 transition shadow-sm shadow-slate-900/30 relative overflow-hidden">
                <span class="absolute -left-2 top-1/2 -translate-y-1/2 h-10 w-10 rounded-full bg-rose-500/30 blur-xl"></span>
                <span class="inline-flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-rose-200 to-rose-500 text-base shadow-md shadow-slate-900/40">ğŸ“£</span>
                <span class="font-semibold text-slate-100">MediÃ¡lnÃ­ centrum</span>
              </button>
              <button class="group flex items-center gap-3 rounded-xl bg-gradient-to-r from-slate-800/80 via-slate-700/70 to-slate-900/80 px-3 py-2.5 hover:from-lime-700/70 hover:via-lime-800/70 hover:to-slate-900/80 transition shadow-sm shadow-slate-900/30 relative overflow-hidden">
                <span class="absolute -left-2 top-1/2 -translate-y-1/2 h-10 w-10 rounded-full bg-lime-500/30 blur-xl"></span>
                <span class="inline-flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-lime-200 to-lime-500 text-base shadow-md shadow-slate-900/40">ğŸ›’</span>
                <span class="font-semibold text-slate-100">Trh</span>
              </button>
            </div>

            <div class="pt-4 border-t border-slate-800/40 space-y-2">
              <div class="flex items-center gap-2 text-sm font-semibold text-slate-100">
                <span class="text-lg">ğŸ“‹</span>
                <span>Ãškoly</span>
              </div>
              <p class="text-sm text-slate-300">
                ZatÃ­m Å¾Ã¡dnÃ© aktivnÃ­ Ãºkoly. Brzy sem pÅ™idÃ¡me krÃ¡tkÃ½ briefing s prioritami pro aktuÃ¡lnÃ­ mÄ›sto.
              </p>
            </div>
          </section>
        </aside>
      </div>
    </div>

    <!-- SpodnÃ­ bar: agent a zdroje -->
    <div class="fixed bottom-0 inset-x-0 bg-gradient-to-r from-slate-900/80 via-slate-950/85 to-slate-900/80 backdrop-blur-sm shadow-[0_-10px_40px_rgba(0,0,0,0.35)]">
      <div class="w-[80%] mx-auto px-6 py-3 flex flex-wrap items-center justify-between gap-4 text-sm text-slate-200">
        <div class="flex items-center gap-3">
          <div class="h-10 w-10 rounded-full bg-gradient-to-br from-sky-400 to-blue-800 flex items-center justify-center text-lg font-bold text-slate-50 shadow-lg shadow-sky-600/30">A</div>
          <div>
            <p class="text-xs uppercase tracking-[0.2em] text-slate-400">Agent</p>
            <p class="font-semibold text-slate-100">ÃšroveÅˆ <span class="text-sky-300" id="agentLevel">1</span></p>
          </div>
        </div>
        <div class="flex items-center gap-4 flex-wrap">
          <div class="min-w-[180px]">
            <div class="flex justify-between text-[11px] text-slate-400 mb-1">
              <span>XP</span>
              <span id="agentXpLabel">0 / 1 000</span>
            </div>
            <div class="h-2 rounded-full bg-slate-800 overflow-hidden">
              <div class="h-full w-1/5 bg-gradient-to-r from-sky-400 to-emerald-400"></div>
            </div>
          </div>
          <div class="min-w-[180px]">
            <div class="flex justify-between text-[11px] text-slate-400 mb-1">
              <span>Energie</span>
              <span id="agentEnergyLabel">0 / 100</span>
            </div>
            <div class="h-2 rounded-full bg-slate-800 overflow-hidden">
              <div class="h-full w-2/5 bg-gradient-to-r from-amber-300 to-rose-400"></div>
            </div>
          </div>
          <div class="flex items-center gap-3 text-xs">
            <div class="bg-slate-800/60 border border-slate-700 rounded-lg px-3 py-2">
              <p class="text-slate-400">Data</p>
              <p class="font-semibold text-slate-100" id="agentDataLabel">0 / 100</p>
            </div>
            <div class="bg-slate-800/60 border border-slate-700 rounded-lg px-3 py-2">
              <p class="text-slate-400">MateriÃ¡l</p>
              <p class="font-semibold text-slate-100" id="agentMaterialLabel">0 / 100</p>
            </div>
            <div class="bg-slate-800/60 border border-slate-700 rounded-lg px-3 py-2">
              <p class="text-slate-400">Kredity</p>
              <p class="font-semibold text-slate-100" id="agentCreditsLabel">0</p>
            </div>
          </div>
          <div class="flex items-center gap-3 text-xs">
            <div class="bg-slate-800/60 border border-slate-700 rounded-lg px-3 py-2">
              <p class="text-slate-400">TÃ½den</p>
              <p class="font-semibold text-slate-100" id="gameWeekLabel">1</p>
            </div>
            <div class="bg-slate-800/60 border border-slate-700 rounded-lg px-3 py-2">
              <p class="text-slate-400">ÄŒas</p>
              <p class="font-semibold text-sky-200" id="currentTimeLabel">Po 08:00</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Overlay pro animaci pÅ™esunu -->
    <div id="travelOverlay" class="fixed inset-0 bg-slate-950/90 backdrop-blur-sm hidden z-50 flex items-center justify-center px-4">
      <div class="travel-card bg-slate-900/80 border border-slate-800 rounded-2xl shadow-[0_20px_80px_rgba(0,0,0,0.6)] relative overflow-visible w-[min(720px,90vw)] px-6 pt-24 pb-6">
        <div class="travel-top-row flex justify-between items-end">
          <div class="travel-top-info flex flex-col gap-1">
            <div class="travel-top-type text-lg font-bold text-slate-100" id="travelTopType">-</div>
            <div class="travel-top-speed text-sm text-slate-300" id="travelTopSpeed">-</div>
          </div>
          <div class="travel-train-wrap pointer-events-none absolute -top-16 right-2 opacity-95 rotate-[-2deg]">
            <img id="travelTrainImg" src="/static/assets/train_1.png" alt="Train" class="max-w-[440px] drop-shadow-[0_18px_22px_rgba(0,0,0,0.55)]" />
          </div>
        </div>

        <div class="travel-clock text-center text-5xl font-extrabold text-sky-100 mt-6 mb-3 leading-tight" id="travelClockLabel">-</div>
        <div class="travel-progress-header flex justify-between text-2xl text-slate-100 font-bold tracking-tight">
          <div id="travelProgressFrom" class="text-left">-</div>
          <div id="travelProgressTo" class="text-right">-</div>
        </div>
        <div class="travel-progress h-3 bg-slate-800 rounded-full overflow-hidden mt-2">
          <div id="travelProgressBar" class="travel-progress-bar h-full bg-gradient-to-r from-sky-400 via-slate-100 to-red-400 w-0"></div>
        </div>

        <div class="mt-6 grid grid-cols-2 gap-4 text-sm text-slate-200">
          <div>
            <div class="travel-label text-xs uppercase tracking-[0.12em] text-slate-400">VzdÃ¡lenost</div>
            <div class="travel-value text-base font-semibold" id="travelDistanceLabel">-</div>
          </div>
          <div>
            <div class="travel-label text-xs uppercase tracking-[0.12em] text-slate-400">ÄŒas jÃ­zdy</div>
            <div class="travel-value text-base font-semibold" id="travelDurationLabel">-</div>
          </div>
        </div>
      </div>
    </div>

    <!-- JS modul â€“ game logic -->
    <script type="module" src="{{ url_for('static', filename='js/game.js') }}"></script>
  </body>
</html>
