<!doctype html>
<html lang="cs">
  <head>
    <meta charset="utf-8" />
    <title>Agent USA – mapa</title>
    <style>
      body {
        margin: 0;
        background: #020617;
        color: #e5e7eb;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      }

      .layout {
        display: flex;
        flex-direction: row;
        align-items: flex-start;
        justify-content: center;
        gap: 16px;
        padding: 16px;
      }

      .map-column {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .top-bar {
        font-size: 14px;
        color: #9ca3af;
      }

      canvas {
        border: 1px solid #1f2937;
        image-rendering: pixelated;
      }

      .sidebar {
        width: 260px;
        padding: 12px 14px;
        border-radius: 12px;
        background: #020617;
        border: 1px solid #1f2937;
        box-shadow: 0 10px 40px rgba(15, 23, 42, 0.8);
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .sidebar h2 {
        margin: 0;
        font-size: 16px;
        font-weight: 600;
        color: #e5e7eb;
      }

      .info-row {
        display: flex;
        justify-content: space-between;
        font-size: 13px;
        color: #d1d5db;
      }

      .info-row span:last-child {
        font-weight: 600;
        color: #f9fafb;
      }

      .info-block {
        margin-top: 4px;
      }

      .info-block-title {
        font-size: 13px;
        font-weight: 600;
        margin-bottom: 4px;
      }

      #connectionsList {
        margin: 0;
        padding-left: 16px;
        list-style: disc;
        font-size: 13px;
        color: #e5e7eb;
        max-height: 260px;
        overflow-y: auto;
      }

      #noConnectionsNote {
        font-size: 12px;
        color: #9ca3af;
        margin-top: 4px;
      }
    </style>
  </head>
  <body>
    <div class="layout">
      <!-- LEVÁ STRANA: MAPA -->
      <div class="map-column">
        <div class="top-bar">
          Mapa: <span id="mapSize"></span>
        </div>
        <canvas id="gameCanvas" width="1024" height="576"></canvas>
      </div>

      <!-- PRAVÁ STRANA: INFO PANEL -->
      <aside class="sidebar">
        <h2>Informace</h2>

        <div class="info-row">
          <span>Pozice agenta:</span>
          <span id="agentPos">-,-</span>
        </div>

        <div class="info-row">
          <span>Aktuální město:</span>
          <span id="currentCityName">-</span>
        </div>

        <div class="info-block">
          <div class="info-block-title">Možné spoje z města:</div>
          <ul id="connectionsList"></ul>
          <div id="noConnectionsNote"></div>
        </div>
      </aside>
    </div>

    <!-- JS modul – tvůj game.js -->
    <script type="module" src="{{ url_for('static', filename='js/game.js') }}"></script>
  </body>
</html>
