<!doctype html>
<html lang="cs">
  <head>
    <meta charset="utf-8" />
    <title>Agent USA ‚Äì mapa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      #timetableCard {
        transition: transform 0.3s ease, margin-top 0.3s ease, box-shadow 0.3s ease;
      }
      .timetable-raised {
        transform: translateY(-50vh);
        margin-top: -40px;
        box-shadow: 0 18px 36px rgba(0, 0, 0, 0.45);
      }
    </style>
  </head>
  <body class="bg-slate-950 text-slate-100 min-h-screen">
    <div class="max-w-screen-xl mx-auto px-4 py-6 flex flex-col gap-4">
      <!-- Horn√≠ bar -->
      <div class="flex items-center justify-between bg-slate-900/70 border border-slate-800 rounded-lg px-4 py-3 shadow-lg shadow-blue-900/30">
        <div class="flex items-center gap-3">
          <div class="h-10 w-10 rounded-full bg-gradient-to-br from-blue-500 via-slate-100 to-red-500 shadow-md shadow-blue-500/30"></div>
          <div>
            <p class="text-xs uppercase tracking-[0.25em] text-slate-400">Agent USA</p>
            <p class="font-semibold text-slate-100">Mapa & j√≠zdn√≠ ≈ô√°d</p>
          </div>
        </div>
        <div class="text-2xl font-bold text-sky-200 tracking-tight">
          <span id="currentTimeLabel">Po 08:00</span>
        </div>
      </div>

      <div class="grid grid-cols-1 xl:grid-cols-[1fr_320px] gap-4">
        <!-- Lev√Ω blok: mapa + tabulka -->
        <div class="space-y-4">
          <div class="relative bg-slate-900/70 border border-slate-800 rounded-2xl shadow-2xl shadow-blue-900/40 p-3 overflow-visible">
            <canvas id="gameCanvas" width="1024" height="576" class="rounded-xl border border-slate-800 bg-slate-950 w-full"></canvas>
          </div>

          <div id="timetableCard" class="relative bg-slate-900/70 border border-slate-800 rounded-2xl shadow-2xl shadow-red-900/30 p-4">
            <div class="flex items-center mb-3">
              <h2 class="text-base font-semibold text-slate-100 flex items-center gap-2">
                <span class="text-sky-300">üöâ</span> J√≠zdn√≠ ≈ô√°d
              </h2>
            </div>

            <div class="overflow-x-auto rounded-xl border border-slate-800">
              <table id="timetableTable" class="min-w-full text-xs bg-slate-950/80 tabular-nums">
                <thead class="bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 text-slate-200">
                  <tr>
                    <th class="px-3 py-2 text-left font-semibold">üïí Odjezd</th>
                    <th class="px-3 py-2 text-left font-semibold">‚û°Ô∏è Smƒõr j√≠zdy</th>
                    <th class="px-3 py-2 text-left font-semibold">üöÜ Typ</th>
                    <th class="px-3 py-2 text-left font-semibold">üìè Vzd√°l.</th>
                    <th class="px-3 py-2 text-left font-semibold">‚è≥ ƒåas j√≠zdy</th>
                    <th class="px-3 py-2 text-left font-semibold">üèÅ P≈ô√≠jezd</th>
                    <th class="px-3 py-2 text-left font-semibold">üéüÔ∏è Ticket</th>
                  </tr>
                </thead>
                <tbody id="timetableBody" class="divide-y divide-slate-800 text-slate-200">
                  <!-- pln√≠ JS -->
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Prav√Ω panel -->
        <aside class="bg-slate-900/70 border border-slate-800 rounded-2xl shadow-2xl shadow-blue-900/40 p-5 space-y-6">
          <div>
            <div class="flex items-center gap-2 mb-2">
              <span class="text-red-300 text-xl">üèôÔ∏è</span>
              <h3 id="currentCityName" class="text-xl font-bold text-slate-100">-</h3>
            </div>
            <p class="text-sm text-slate-300">
              <span id="currentCityState" class="font-semibold">-</span>
            </p>
            <p id="currentCityDescription" class="mt-1 text-slate-400 text-sm">
              Kr√°tk√Ω popis m√≠sta (dopln√≠m z datab√°ze).
            </p>
          </div>

          <div class="space-y-3">
            <h4 class="text-sm font-semibold text-slate-100">Rychl√° navigace</h4>
            <div class="grid grid-cols-1 gap-2 px-5">
              <button id="ticketToggleBtn" class="relative w-full pl-20 pr-4 py-4 rounded-xl bg-slate-800/80 border border-slate-700 text-slate-100 hover:border-sky-400 transition flex items-center justify-end overflow-visible">
                <img src="/static/assets/train_station.png" alt="" class="absolute -left-4 top-1/2 -translate-y-1/2 h-16 w-16 drop-shadow-[0_10px_20px_rgba(0,0,0,0.45)]" />
                <span class="font-semibold text-right w-full pr-2">N√°kup j√≠zdenek</span>
              </button>
              <button class="relative w-full pl-20 pr-4 py-4 rounded-xl bg-slate-800/80 border border-slate-700 text-slate-100 hover:border-sky-400 transition flex items-center justify-end overflow-visible">
                <img src="/static/assets/bank.png" alt="" class="absolute -left-4 top-1/2 -translate-y-1/2 h-16 w-16 drop-shadow-[0_10px_20px_rgba(0,0,0,0.45)]" />
                <span class="font-semibold text-right w-full pr-2">Banka</span>
              </button>
              <button class="relative w-full pl-20 pr-4 py-4 rounded-xl bg-slate-800/80 border border-slate-700 text-slate-100 hover:border-sky-400 transition flex items-center justify-end overflow-visible">
                <img src="/static/assets/town_office.png" alt="" class="absolute -left-4 top-1/2 -translate-y-1/2 h-16 w-16 drop-shadow-[0_10px_20px_rgba(0,0,0,0.45)]" />
                <span class="font-semibold text-right w-full pr-2">Radnice</span>
              </button>
              <button class="relative w-full pl-20 pr-4 py-4 rounded-xl bg-slate-800/80 border border-slate-700 text-slate-100 hover:border-sky-400 transition flex items-center justify-end overflow-visible">
                <img src="/static/assets/fog_centrum.png" alt="" class="absolute -left-4 top-1/2 -translate-y-1/2 h-16 w-16 drop-shadow-[0_10px_20px_rgba(0,0,0,0.45)]" />
                <span class="font-semibold text-right w-full pr-2">Medi√°ln√≠ centrum</span>
              </button>
              <button class="relative w-full pl-20 pr-4 py-4 rounded-xl bg-slate-800/80 border border-slate-700 text-slate-100 hover:border-sky-400 transition flex items-center justify-end overflow-visible">
                <img src="/static/assets/laboratory.png" alt="" class="absolute -left-4 top-1/2 -translate-y-1/2 h-16 w-16 drop-shadow-[0_10px_20px_rgba(0,0,0,0.45)]" />
                <span class="font-semibold text-right w-full pr-2">Laborato≈ô</span>
              </button>
              <button class="relative w-full pl-20 pr-4 py-4 rounded-xl bg-slate-800/80 border border-slate-700 text-slate-100 hover:border-sky-400 transition flex items-center justify-end overflow-visible">
                <img src="/static/assets/market.png" alt="" class="absolute -left-4 top-1/2 -translate-y-1/2 h-16 w-16 drop-shadow-[0_10px_20px_rgba(0,0,0,0.45)]" />
                <span class="font-semibold text-right w-full pr-2">Trh</span>
              </button>
            </div>
          </div>
        </aside>
      </div>
    </div>

    <!-- Overlay pro animaci p≈ôesunu -->
    <div id="travelOverlay" class="fixed inset-0 bg-slate-950/90 backdrop-blur-sm hidden z-50 flex items-center justify-center px-4">
      <div class="travel-card bg-slate-900/80 border border-slate-800 rounded-2xl shadow-[0_20px_80px_rgba(0,0,0,0.6)] relative overflow-visible w-[min(720px,90vw)] px-6 pt-24 pb-6">
        <div class="travel-top-row flex justify-between items-end">
          <div class="travel-top-info flex flex-col gap-1">
            <div class="travel-top-type text-lg font-bold text-slate-100" id="travelTopType">-</div>
            <div class="travel-top-speed text-sm text-slate-300" id="travelTopSpeed">-</div>
          </div>
          <div class="travel-train-wrap pointer-events-none absolute -top-16 right-2 opacity-95 rotate-[-2deg]">
            <img id="travelTrainImg" src="/static/assets/train_1.png" alt="Train" class="max-w-[440px] drop-shadow-[0_18px_22px_rgba(0,0,0,0.55)]" />
          </div>
        </div>

        <div class="travel-clock text-center text-5xl font-extrabold text-sky-100 mt-6 mb-3 leading-tight" id="travelClockLabel">-</div>
        <div class="travel-progress-header flex justify-between text-2xl text-slate-100 font-bold tracking-tight">
          <div id="travelProgressFrom" class="text-left">-</div>
          <div id="travelProgressTo" class="text-right">-</div>
        </div>
        <div class="travel-progress h-3 bg-slate-800 rounded-full overflow-hidden mt-2">
          <div id="travelProgressBar" class="travel-progress-bar h-full bg-gradient-to-r from-sky-400 via-slate-100 to-red-400 w-0"></div>
        </div>

        <div class="mt-6 grid grid-cols-2 gap-4 text-sm text-slate-200">
          <div>
            <div class="travel-label text-xs uppercase tracking-[0.12em] text-slate-400">Vzd√°lenost</div>
            <div class="travel-value text-base font-semibold" id="travelDistanceLabel">-</div>
          </div>
          <div>
            <div class="travel-label text-xs uppercase tracking-[0.12em] text-slate-400">ƒåas j√≠zdy</div>
            <div class="travel-value text-base font-semibold" id="travelDurationLabel">-</div>
          </div>
        </div>
      </div>
    </div>

    <!-- JS modul ‚Äì game logic -->
    <script type="module" src="{{ url_for('static', filename='js/game.js') }}"></script>
  </body>
</html>
