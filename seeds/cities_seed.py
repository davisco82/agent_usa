# cities_seed.py

from models import db
from models.region import Region
from models.city import City

REGIONS = {
    "pacific_northwest": "Pacific Northwest",
    "pacific_southwest": "Pacific Southwest",
    "mountain": "Mountain",
    "midwest_north": "Midwest North",
    "midwest_central": "Midwest Central",
    "southwest": "Southwest",
    "south_central": "South Central",
    "southeast": "Southeast",
    "northeast": "Northeast",
}

CITIES = [
    {
        "name": "Seattle",
        "region": "pacific_northwest",
        "importance": 1,
        "lat": 46.9062,
        "lon": -119.1321,
        "px": 67.38,
        "py": 69.5,
        "grid_x": 8,
        "grid_y": 9,
    },
    {
        "name": "Portland",
        "region": "pacific_northwest",
        "importance": 2,
        "lat": 45.2051,
        "lon": -119.725,
        "px": 56.61,
        "py": 109.61,
        "grid_x": 7,
        "grid_y": 14,
    },
    {
        "name": "Spokane",
        "region": "pacific_northwest",
        "importance": 3,
        "lat": 46.0588,
        "lon": -115.426,
        "px": 134.73,
        "py": 89.48,
        "grid_x": 17,
        "grid_y": 11,
    },
    {
        "name": "Boise",
        "region": "pacific_northwest",
        "importance": 2,
        "lat": 42.115,
        "lon": -115.1023,
        "px": 140.62,
        "py": 182.46,
        "grid_x": 18,
        "grid_y": 23,
    },
    {
        "name": "Helena",
        "region": "pacific_northwest",
        "importance": 3,
        "lat": 44.9884,
        "lon": -111.0245,
        "px": 214.72,
        "py": 114.72,
        "grid_x": 27,
        "grid_y": 14,
    },
    {
        "name": "Bismarck",
        "region": "pacific_northwest",
        "importance": 3,
        "lat": 44.2083,
        "lon": -100.7837,
        "px": 400.82,
        "py": 133.11,
        "grid_x": 50,
        "grid_y": 17,
    },
    {
        "name": "San Francisco",
        "region": "pacific_southwest",
        "importance": 2,
        "lat": 37.7749,
        "lon": -121.4194,
        "px": 25.82,
        "py": 284.78,
        "grid_x": 3,
        "grid_y": 36,
    },
    {
        "name": "Oakland",
        "region": "pacific_southwest",
        "importance": 3,
        "lat": 37.9044,
        "lon": -121.2711,
        "px": 28.51,
        "py": 281.73,
        "grid_x": 4,
        "grid_y": 35,
    },
    {
        "name": "San Jose",
        "region": "pacific_southwest",
        "importance": 2,
        "lat": 37.3382,
        "lon": -120.8863,
        "px": 35.51,
        "py": 295.08,
        "grid_x": 4,
        "grid_y": 37,
    },
    {
        "name": "Sacramento",
        "region": "pacific_southwest",
        "importance": 2,
        "lat": 38.5816,
        "lon": -120.5944,
        "px": 40.81,
        "py": 265.76,
        "grid_x": 5,
        "grid_y": 33,
    },
    {
        "name": "Fresno",
        "region": "pacific_southwest",
        "importance": 3,
        "lat": 36.7378,
        "lon": -119.7871,
        "px": 55.48,
        "py": 309.23,
        "grid_x": 7,
        "grid_y": 39,
    },
    {
        "name": "Bakersfield",
        "region": "pacific_southwest",
        "importance": 3,
        "lat": 35.3733,
        "lon": -119.0187,
        "px": 69.44,
        "py": 341.4,
        "grid_x": 9,
        "grid_y": 43,
    },
    {
        "name": "Los Angeles",
        "region": "pacific_southwest",
        "importance": 1,
        "lat": 34.0522,
        "lon": -118.2437,
        "px": 83.53,
        "py": 372.55,
        "grid_x": 10,
        "grid_y": 47,
    },
    {
        "name": "San Diego",
        "region": "pacific_southwest",
        "importance": 2,
        "lat": 32.7157,
        "lon": -117.1611,
        "px": 103.2,
        "py": 404.05,
        "grid_x": 13,
        "grid_y": 51,
    },
    {
        "name": "Eureka",
        "region": "pacific_southwest",
        "importance": 3,
        "lat": 41.0021,
        "lon": -122.1637,
        "px": 12.29,
        "py": 208.7,
        "grid_x": 2,
        "grid_y": 26,
    },
    {
        "name": "Las Vegas",
        "region": "mountain",
        "importance": 2,
        "lat": 36.1699,
        "lon": -115.1398,
        "px": 139.93,
        "py": 322.62,
        "grid_x": 17,
        "grid_y": 40,
    },
    {
        "name": "Phoenix",
        "region": "mountain",
        "importance": 2,
        "lat": 32.8484,
        "lon": -112.074,
        "px": 195.65,
        "py": 400.93,
        "grid_x": 24,
        "grid_y": 50,
    },
    {
        "name": "Tucson",
        "region": "mountain",
        "importance": 3,
        "lat": 31.8026,
        "lon": -110.9747,
        "px": 215.63,
        "py": 425.58,
        "grid_x": 27,
        "grid_y": 53,
    },
    {
        "name": "Salt Lake City",
        "region": "mountain",
        "importance": 2,
        "lat": 39.7608,
        "lon": -111.891,
        "px": 198.97,
        "py": 237.96,
        "grid_x": 25,
        "grid_y": 30,
    },
    {
        "name": "Denver",
        "region": "mountain",
        "importance": 1,
        "lat": 37.5392,
        "lon": -104.9903,
        "px": 324.38,
        "py": 290.34,
        "grid_x": 41,
        "grid_y": 36,
    },
    {
        "name": "Colorado Springs",
        "region": "mountain",
        "importance": 2,
        "lat": 36.8339,
        "lon": -104.8214,
        "px": 327.45,
        "py": 306.96,
        "grid_x": 41,
        "grid_y": 38,
    },
    {
        "name": "Santa Fe",
        "region": "mountain",
        "importance": 3,
        "lat": 34.787,
        "lon": -105.9378,
        "px": 307.16,
        "py": 355.22,
        "grid_x": 38,
        "grid_y": 44,
    },
    {
        "name": "Albuquerque",
        "region": "mountain",
        "importance": 2,
        "lat": 33.8844,
        "lon": -106.6504,
        "px": 294.21,
        "py": 376.5,
        "grid_x": 37,
        "grid_y": 47,
    },
    {
        "name": "Cheyenne",
        "region": "mountain",
        "importance": 3,
        "lat": 39.1,
        "lon": -104.1202,
        "px": 340.19,
        "py": 253.54,
        "grid_x": 43,
        "grid_y": 32,
    },
    {
        "name": "Pierre",
        "region": "mountain",
        "importance": 3,
        "lat": 41.9683,
        "lon": -100.35,
        "px": 408.7,
        "py": 185.92,
        "grid_x": 51,
        "grid_y": 23,
    },
    {
        "name": "Sheridan",
        "region": "mountain",
        "importance": 3,
        "lat": 42.5972,
        "lon": -106.9562,
        "px": 288.65,
        "py": 171.09,
        "grid_x": 36,
        "grid_y": 21,
    },
    {
        "name": "Minneapolis",
        "region": "midwest_north",
        "importance": 2,
        "lat": 42.9778,
        "lon": -93.265,
        "px": 537.46,
        "py": 162.12,
        "grid_x": 67,
        "grid_y": 20,
    },
    {
        "name": "Milwaukee",
        "region": "midwest_north",
        "importance": 3,
        "lat": 41.2389,
        "lon": -89.7065,
        "px": 602.12,
        "py": 203.11,
        "grid_x": 75,
        "grid_y": 25,
    },
    {
        "name": "Chicago",
        "region": "midwest_north",
        "importance": 1,
        "lat": 39.4781,
        "lon": -89.1298,
        "px": 612.6,
        "py": 244.63,
        "grid_x": 77,
        "grid_y": 31,
    },
    {
        "name": "Detroit",
        "region": "midwest_north",
        "importance": 2,
        "lat": 40.5314,
        "lon": -84.5458,
        "px": 695.91,
        "py": 219.79,
        "grid_x": 87,
        "grid_y": 27,
    },
    {
        "name": "Kansas City",
        "region": "midwest_central",
        "importance": 2,
        "lat": 37.0997,
        "lon": -94.5786,
        "px": 513.59,
        "py": 300.7,
        "grid_x": 64,
        "grid_y": 38,
    },
    {
        "name": "St. Louis",
        "region": "midwest_central",
        "importance": 1,
        "lat": 36.627,
        "lon": -90.1994,
        "px": 593.17,
        "py": 311.84,
        "grid_x": 74,
        "grid_y": 39,
    },
    {
        "name": "Indianapolis",
        "region": "midwest_central",
        "importance": 2,
        "lat": 37.9684,
        "lon": -86.6581,
        "px": 657.52,
        "py": 280.22,
        "grid_x": 82,
        "grid_y": 35,
    },
    {
        "name": "Cincinnati",
        "region": "midwest_central",
        "importance": 3,
        "lat": 37.3031,
        "lon": -84.912,
        "px": 689.25,
        "py": 295.9,
        "grid_x": 86,
        "grid_y": 37,
    },
    {
        "name": "Columbus",
        "region": "midwest_central",
        "importance": 2,
        "lat": 38.3612,
        "lon": -83.2988,
        "px": 718.57,
        "py": 270.96,
        "grid_x": 90,
        "grid_y": 34,
    },
    {
        "name": "Omaha",
        "region": "midwest_central",
        "importance": 3,
        "lat": 39.2565,
        "lon": -95.9345,
        "px": 488.95,
        "py": 249.85,
        "grid_x": 61,
        "grid_y": 31,
    },
    {
        "name": "Wichita",
        "region": "midwest_central",
        "importance": 3,
        "lat": 35.6872,
        "lon": -97.3301,
        "px": 463.58,
        "py": 334,
        "grid_x": 58,
        "grid_y": 42,
    },
    {
        "name": "Tulsa",
        "region": "midwest_central",
        "importance": 2,
        "lat": 34.15398,
        "lon": -95.99277,
        "px": 487.89,
        "py": 370.15,
        "grid_x": 61,
        "grid_y": 46,
    },
    {
        "name": "Little Rock",
        "region": "midwest_central",
        "importance": 3,
        "lat": 32.7465,
        "lon": -92.2896,
        "px": 555.18,
        "py": 403.33,
        "grid_x": 69,
        "grid_y": 50,
    },
    {
        "name": "El Paso",
        "region": "southwest",
        "importance": 1,
        "lat": 31.3619,
        "lon": -107.185,
        "px": 284.49,
        "py": 435.97,
        "grid_x": 36,
        "grid_y": 54,
    },
    {
        "name": "Amarillo",
        "region": "southwest",
        "importance": 2,
        "lat": 32.7555,
        "lon": -100.3308,
        "px": 409.05,
        "py": 403.12,
        "grid_x": 51,
        "grid_y": 50,
    },
    {
        "name": "Dallas",
        "region": "south_central",
        "importance": 2,
        "lat": 31.4767,
        "lon": -96.797,
        "px": 473.27,
        "py": 433.26,
        "grid_x": 59,
        "grid_y": 54,
    },
    {
        "name": "Austin",
        "region": "south_central",
        "importance": 2,
        "lat": 29.4672,
        "lon": -98.7431,
        "px": 437.91,
        "py": 480.64,
        "grid_x": 55,
        "grid_y": 60,
    },
    {
        "name": "San Antonio",
        "region": "south_central",
        "importance": 2,
        "lat": 28.5241,
        "lon": -100.4936,
        "px": 406.09,
        "py": 502.87,
        "grid_x": 51,
        "grid_y": 63,
    },
    {
        "name": "Houston",
        "region": "south_central",
        "importance": 1,
        "lat": 29.1604,
        "lon": -96.3698,
        "px": 481.03,
        "py": 487.87,
        "grid_x": 60,
        "grid_y": 61,
    },
    {
        "name": "Jackson",
        "region": "south_central",
        "importance": 3,
        "lat": 31.0288,
        "lon": -90.1848,
        "px": 593.43,
        "py": 443.82,
        "grid_x": 74,
        "grid_y": 55,
    },
    {
        "name": "New Orleans",
        "region": "south_central",
        "importance": 2,
        "lat": 29.2511,
        "lon": -90.6715,
        "px": 584.59,
        "py": 485.73,
        "grid_x": 73,
        "grid_y": 61,
    },
    {
        "name": "Memphis",
        "region": "south_central",
        "importance": 3,
        "lat": 33.1495,
        "lon": -90.049,
        "px": 595.9,
        "py": 393.83,
        "grid_x": 74,
        "grid_y": 49,
    },
    {
        "name": "Atlanta",
        "region": "southeast",
        "importance": 1,
        "lat": 32.749,
        "lon": -84.388,
        "px": 698.78,
        "py": 403.27,
        "grid_x": 87,
        "grid_y": 50,
    },
    {
        "name": "Montgomery",
        "region": "southeast",
        "importance": 3,
        "lat": 31.3792,
        "lon": -86.3077,
        "px": 663.89,
        "py": 435.56,
        "grid_x": 83,
        "grid_y": 54,
    },
    {
        "name": "Charlotte",
        "region": "southeast",
        "importance": 2,
        "lat": 34.4271,
        "lon": -80.8431,
        "px": 763.2,
        "py": 363.71,
        "grid_x": 95,
        "grid_y": 45,
    },
    {
        "name": "Raleigh",
        "region": "southeast",
        "importance": 3,
        "lat": 34.9796,
        "lon": -79.6382,
        "px": 785.09,
        "py": 350.68,
        "grid_x": 98,
        "grid_y": 44,
    },
    {
        "name": "Jacksonville",
        "region": "southeast",
        "importance": 2,
        "lat": 30.3322,
        "lon": -81.6557,
        "px": 748.43,
        "py": 460.25,
        "grid_x": 94,
        "grid_y": 58,
    },
    {
        "name": "Tampa",
        "region": "southeast",
        "importance": 2,
        "lat": 27.9506,
        "lon": -82.4572,
        "px": 733.86,
        "py": 516.4,
        "grid_x": 92,
        "grid_y": 65,
    },
    {
        "name": "Miami",
        "region": "southeast",
        "importance": 2,
        "lat": 25.7617,
        "lon": -80.1918,
        "px": 775.03,
        "py": 568,
        "grid_x": 97,
        "grid_y": 71,
    },
    {
        "name": "Pittsburgh",
        "region": "northeast",
        "importance": 3,
        "lat": 38.7406,
        "lon": -80.3959,
        "px": 771.32,
        "py": 262.01,
        "grid_x": 96,
        "grid_y": 33,
    },
    {
        "name": "Cleveland",
        "region": "northeast",
        "importance": 2,
        "lat": 39.8993,
        "lon": -82.4944,
        "px": 733.19,
        "py": 234.7,
        "grid_x": 92,
        "grid_y": 29,
    },
    {
        "name": "Buffalo",
        "region": "northeast",
        "importance": 3,
        "lat": 41.0864,
        "lon": -80.4784,
        "px": 769.82,
        "py": 206.71,
        "grid_x": 96,
        "grid_y": 26,
    },
    {
        "name": "Albany",
        "region": "northeast",
        "importance": 3,
        "lat": 41.2526,
        "lon": -76.2562,
        "px": 846.55,
        "py": 202.79,
        "grid_x": 106,
        "grid_y": 25,
    },
    {
        "name": "New York",
        "region": "northeast",
        "importance": 1,
        "lat": 40.1128,
        "lon": -76.006,
        "px": 851.1,
        "py": 229.66,
        "grid_x": 106,
        "grid_y": 29,
    },
    {
        "name": "Philadelphia",
        "region": "northeast",
        "importance": 2,
        "lat": 39.0526,
        "lon": -76.2652,
        "px": 846.39,
        "py": 254.66,
        "grid_x": 106,
        "grid_y": 32,
    },
    {
        "name": "Baltimore",
        "region": "northeast",
        "importance": 2,
        "lat": 38.2904,
        "lon": -77.9122,
        "px": 816.46,
        "py": 272.63,
        "grid_x": 102,
        "grid_y": 34,
    },
    {
        "name": "Washington",
        "region": "northeast",
        "importance": 2,
        "lat": 37.7072,
        "lon": -78.2369,
        "px": 810.56,
        "py": 286.38,
        "grid_x": 101,
        "grid_y": 36,
    },
    {
        "name": "Boston",
        "region": "northeast",
        "importance": 2,
        "lat": 41.3601,
        "lon": -73.0589,
        "px": 904.65,
        "py": 200.26,
        "grid_x": 113,
        "grid_y": 25,
    },
]



def register_city_seed_commands(app):
    @app.cli.command("seed-cities")
    def seed_cities():
        """Seed regions and cities for the map."""
        print("Seeding regions & cities...")

        # Regions
        region_cache = {}
        for code, name in REGIONS.items():
            region = Region.query.filter_by(code=code).first()
            if not region:
                region = Region(code=code, name=name)
                db.session.add(region)
            region_cache[code] = region

        db.session.flush()  # ať mají regiony id

        # Cities
        for data in CITIES:
            city = City.query.filter_by(name=data["name"]).first()
            if not city:
                city = City(name=data["name"])
                db.session.add(city)

            city.region = region_cache[data["region"]]
            city.importance = data["importance"]
            city.lat = data["lat"]
            city.lon = data["lon"]
            city.px = data["px"]
            city.py = data["py"]
            city.grid_x = data["grid_x"]
            city.grid_y = data["grid_y"]

        db.session.commit()
        print("✅ Seed hotový")
